<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>K-AI Sea Research</title>

<style>
body{
    margin:0;
    background:#0b1220;
    color:#e2e8f0;
    font-family:system-ui,-apple-system,"Noto Sans KR",sans-serif;
    display:flex;
    flex-direction:column;
    height:100vh;
    overflow-x:hidden;
}
header{
    padding:14px 20px;
    background:#111827;
    border-bottom:1px solid rgba(255,255,255,0.08);
    display:flex;
    justify-content:space-between;
}
header h1{
    margin:0;
    font-size:14px;
    letter-spacing:0.15em;
}
.container{
    flex:1;
    display:flex;
    min-height:0;
}
.sidebar{
    width:380px;
    background:#0f172a;
    overflow:auto;
    border-right:1px solid rgba(255,255,255,0.08);
    padding:15px;
}
.section-title{
    font-size:12px;
    margin-bottom:10px;
    color:#60a5fa;
}
.file-item{
    padding:10px;
    margin-bottom:6px;
    border-radius:8px;
    background:rgba(255,255,255,0.05);
    cursor:pointer;
}
.file-item:hover{
    background:rgba(96,165,250,0.2);
}
.viewer{
    flex:1;
    position:relative;
}
iframe{
    width:100%;
    height:100%;
    border:0;
    background:white;
}
.empty{
    position:absolute;
    inset:0;
    display:flex;
    justify-content:center;
    align-items:center;
    color:#94a3b8;
}
footer{
    text-align:center;
    padding:8px;
    font-size:11px;
    background:#111827;
}

/* ğŸ”¥ ëª¨ë°”ì¼ ëŒ€ì‘ */
@media (max-width: 768px){
    .container{
        flex-direction:column;
    }
    .sidebar{
        width:100%;
        border-right:none;
        border-bottom:1px solid rgba(255,255,255,0.08);
    }
    .viewer{
        height:70vh;
    }
}
</style>
</head>

<body>

<header>
<h1>K-AI Sea Research</h1>
<div id="versionInfo">Loading version...</div>
</header>

<div class="container">

<div class="sidebar">
<div class="section-title">ğŸ“„ HTML Documents</div>
<div id="fileList">Loading files...</div>
</div>

<div class="viewer">
<div class="empty" id="empty">ë¬¸ì„œë¥¼ ì„ íƒí•˜ì‹­ì‹œì˜¤.</div>
<iframe id="viewerFrame"></iframe>
</div>

</div>

<footer>Â© 2026 KAFRI â€¢ GitHub Pages Rendering</footer>

<script>
const OWNER = "JongCheon-Kim";
const REPO  = "fishery-intelligence-webplay";

const fileList = document.getElementById("fileList");
const frame = document.getElementById("viewerFrame");
const empty = document.getElementById("empty");
const versionInfo = document.getElementById("versionInfo");

async function loadLatestRelease(){
    try{
        const res = await fetch(`https://api.github.com/repos/${OWNER}/${REPO}/releases/latest`);
        const data = await res.json();
        if(data.tag_name){
            versionInfo.innerText = "Latest Release: " + data.tag_name;
        }else{
            versionInfo.innerText = "No release";
        }
    }catch{
        versionInfo.innerText = "";
    }
}

async function loadMainFiles(){
    try{
        const res = await fetch(`https://api.github.com/repos/${OWNER}/${REPO}/contents`);
        const files = await res.json();

        const htmlFiles = files.filter(f => 
            f.name.endsWith(".html") && f.name !== "index.html"
        );

        if(htmlFiles.length === 0){
            fileList.innerText = "HTML íŒŒì¼ ì—†ìŒ";
            return;
        }

        fileList.innerHTML = "";

        htmlFiles.forEach(file=>{
            const div = document.createElement("div");
            div.className="file-item";
            div.innerText = file.name;
            div.onclick = ()=> openFile(file.name);
            fileList.appendChild(div);
        });

    }catch{
        fileList.innerText = "íŒŒì¼ ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨";
    }
}

/* ğŸ”¥ ëª¨ë°”ì¼ì—ì„œëŠ” ìƒˆì°½ ì´ë™ */
function openFile(fileName){

    const pageUrl = `https://${OWNER}.github.io/${REPO}/${fileName}`;

    if (window.innerWidth < 768) {
        window.location.href = pageUrl;
    } else {
        empty.style.display="none";
        frame.src = pageUrl;
    }
}

loadLatestRelease();
loadMainFiles();
</script>

</body>
</html>
